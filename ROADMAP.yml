phases:
  - id: 0
    title: "Phase 0: The IR Kernel (Execution Core)"
    description: "Foundational layer for structured knowledge."
    phase_gate: "A node cannot be deleted if it is a PIN or has active dependents."
    hitos:
      - id: "0.1"
        title: "IR Schema Definition"
        description: "Schema definition for WorkGraph IR (Nodes/Edges/Metadata)."
        status: "done"
        gate: "Zod schema for all node types defined and validated."
        tasks: 
          - "Define PREFLIGHT_TEMPLATE.md (Process)"
          - "Define WorkNodeSchema V2 (Claims, Evidence, Decisions)"
          - "Define NodeMetadataSchema V2 (Confidence, Pin, Validated)"
          - "Define WorkEdgeSchema (Edges)"
        evidence_nodes: 
          - "PLAN-HITO-0.1.md"
          - "src/canon/schema/ir.ts"
          - "tests/schema.test.ts"

      - id: "0.2"
        title: "Versioning Engine"
        description: "Hash-based delta tracking (git-like for the graph)."
        status: "done"
        gate: "Hash-based delta verification operational."
        tasks:
          - "Implement computeNodeHash (kernel)"
          - "Implement verifyIntegrity (kernel)"
          - "Implement createVersion (kernel)"
          - "Implement previous_version_hash chaining"
        evidence_nodes: 
          - "PLAN-HITO-0.2.md"
          - "src/kernel/versioning.ts"
          - "tests/versioning.test.ts"

      - id: "0.3"
        title: "PIN Enforcement"
        description: "PIN/Invariant enforcement logic in the DB layer (Kernel for now)."
        status: "done"
        gate: "Kernel guards preventing contradiction of PIN nodes."
        tasks:
          - "Implement canModifyNode (Guard)"
          - "Implement canDeleteNode (Guard/Dependency Check)"
          - "Implement canAddRelation (Contradiction Prevention)"
          - "Implement checkNodeStaleness (Expiration Logic)"
          - "Implement KernelLogger (Observability)"
        evidence_nodes: 
          - "PLAN-HITO-0.3.md"
          - "src/kernel/guards.ts"
          - "tests/guards.test.ts"
          - "documentacion/HITO_PHASE_2_ENHANCEMENTS.md"

  - id: 1
    title: "Phase 1: RLM Compiler v1 (Deliverable Engine)"
    description: "The primary execution engine for generating deliverables."
    phase_gate: "Deliverables must include an Assertion Map to be marked as 'Done'."
    hitos:
      - id: "1.1"
        title: "Compiler Pipeline (Dry Run)"
        description: "Scaffolding of the RLM compiler (Planner -> Retriever -> Assembler) with deterministic stubs."
        status: "done"
        gate: "Dry run of the pipeline (Input -> Artifact) passes."
        tasks:
          - "Implement Planner (Stub)"
          - "Implement Retriever (Stub)"
          - "Implement Assembler (Stub)"
          - "Implement Pipeline Orchestrator"
        evidence_nodes: 
          - "PLAN-HITO-1.1.md"
          - "src/compiler/index.ts"
          - "tests/compiler.test.ts"

      - id: "1.2"
        title: "Manifest Templates"
        description: "Typed templates for Artifact generation (Code, Docs, Plans)."
        status: "done"
        gate: "Assembler uses typed templates instead of raw strings."
        tasks:
          - "Implement Template Interface"
          - "Implement CodeManifest"
          - "Implement DocManifest"
          - "Implement PlanManifest"
          - "Refactor Assembler to use Templates"
        evidence_nodes: 
          - "PLAN-HITO-1.2.md"
          - "src/compiler/templates/"
          - "tests/templates.test.ts"

      - id: "1.3"
        title: "Proof-Carrying Deliverables"
        description: "Receipts generation for proof of work."
        status: "done"
        gate: "Metadata receipts attached to all outputs."
        tasks:
          - "Define ReceiptSchema & AssertionMapSchema"
          - "Extract Primitives (Schema Refactor)"
          - "Extend ArtifactNode with Receipt"
          - "Update Assembler to attach Receipts"
        evidence_nodes: 
          - "PLAN-HITO-1.3.md"
          - "src/canon/schema/receipt.ts"
          - "src/canon/schema/primitives.ts"
          - "tests/receipts.test.ts"

      - id: "1.4"
        title: "The Verifier Logic"
        description: "Deterministic verification of artifacts (Structure, Integrity, Thresholds)."
        status: "done"
        gate: "The pipeline returns an Artifact containing a VerificationReport."
        tasks:
          - "Define VerificationReportSchema"
          - "Implement src/compiler/verifier.ts"
          - "Implement Filter logic"
          - "Integrate Verifier into Pipeline"
        evidence_nodes: 
          - "PLAN-HITO-1.4.md"
          - "src/compiler/verifier.ts"
          - "tests/verifier.test.ts"


  - id: 2
    title: "Phase 2: Capture & Interface (The Wedge)"
    description: "Expanding the surface area for knowledge entry and interaction."
    phase_gate: "Captures must pass Zod validation before entering the WorkGraph."
    hitos:
      - id: "2.0"
        title: "WorkGraph UI Scaffold"
        description: "Next.js 15 + React Flow + TipTap setup."
        status: "done"
        gate: "UI compiles and renders Graph + Editor."
        tasks: 
          - "Initialize Next.js 15"
          - "Install React Flow & TipTap"
          - "Setup Tailwind & App Router"
        evidence_nodes: 
          - "PLAN-HITO-2.0.md"
          - "src/app/page.tsx"
          - "src/components/graph/WorkGraphCanvas.tsx"

      - id: "2.1"
        title: "The Wiring (Type Integration)"
        description: "Strict typing for the Frontend Store using IR Schemas."
        status: "done"
        gate: "Zero 'any' in useGraphStore.ts and validated sync with IR schema."
        tasks:
          - "Import WorkNode/WorkEdge into Store"
          - "Define AppNode/AppEdge interfaces"
          - "Implement Backend/Flow Adapters"
          - "Connect NodeEditor to Store"
        evidence_nodes:
          - "src/store/useGraphStore.ts"
          - "src/lib/adapters.ts"
          - "src/components/graph/GraphCanvas.tsx"
          - "src/components/editor/NodeEditor.tsx"
          - "documentacion/HITO_2.1_SUMMARY.md"

      - id: "2.2"
        title: "The Deep Editor"
        description: "Bidirectional synchronization, debouncing, and automated traceability."
        status: "done"
        gate: "Real-time sync with debounce and metadata.updated_at tracking."
        tasks:
          - "Implement debounce in NodeEditor"
          - "Auto-update updated_at metadata"
          - "Add node type badge to editor header"
        evidence_nodes:
          - "PLAN-HITO-2.2.md"
          - "src/components/editor/NodeEditor.tsx"
          - "documentacion/HITO_2.2_SUMMARY.md"

      - id: "2.3"
        title: "The Graph Topology"
        description: "Interactivity for growing the graph (Creation, Connection, Mutation)."
        status: "done"
        gate: "Nodes can be created, linked, and mutated while maintaining IR integrity."
        tasks:
          - "Implement addNode action with versioning"
          - "Implement onConnect edge creation logic"
          - "Implement mutateNodeType action with re-hashing"
          - "Add Floating Creation UI"
          - "Implement Double-Click to create (Polish)"
        evidence_nodes:
          - "src/store/useGraphStore.ts"
          - "src/components/graph/GraphCanvas.tsx"
          - "src/components/editor/NodeEditor.tsx"
          - "documentacion/HITO_2.3_SUMMARY.md"

      - id: "2.4"
        title: "The Browser & Discovery"
        description: "Sidebar navigation and real-time search for large graphs."
        status: "done"
        gate: "Sidebar renders node list with functional text search/filter."
        tasks:
          - "Implement Sidebar component"
          - "Integrate real-time search filter"
          - "Sync Sidebar selection with Graph and Editor"
        evidence_nodes:
          - "src/components/layout/Sidebar.tsx"
          - "src/components/layout/NodeListItem.tsx"
          - "src/store/useGraphStore.ts"
          - "documentacion/HITO_2.4_SUMMARY.md"

      - id: "2.5"
        title: "The Persistence Layer (Supabase)"
        description: "Moving from RAM to SQL with bidirectional sync."
        status: "done"
        gate: "Graph survives page refresh via Supabase SQL persistence."
        tasks:
          - "Setup Supabase SQL Schema (init.sql)"
          - "Implement syncService (src/lib/sync.ts)"
          - "Integrate persistence into useGraphStore"
        evidence_nodes:
          - "supabase/migrations/init.sql"
          - "src/lib/sync.ts"
          - "src/store/useGraphStore.ts"
          - "documentacion/HITO_2.5_SUMMARY.md"

      - id: "2.6"
        title: "Chrome MV3 Extension"
        description: "Explicit selection capture for the web."
        status: "done"
        gate: "MV3 extension communicating with Supabase."
        tasks: 
          - "Initialize extension scaffold (Vite + TS)"
          - "Implement Background Worker (Sync logic)"
          - "Implement Context Menu Capture"
          - "Implement Context extraction (Content Script)"
          - "Implement Rich Metadata enrichment (accessed_at, source_title)"
          - "Implement Inbox triage UX in Web App"
          - "Implement Zero-Touch Config (.env injection)"
        evidence_nodes: 
          - "extension/src/background/index.ts"
          - "extension/src/content/index.ts"
          - "src/components/editor/NodeEditor.tsx"
          - "src/canon/schema/ir.ts"
          - "documentacion/HITO_2.6_SUMMARY.md"

      - id: "2.7"
        title: "The Omni-Ingestor"
        description: "Universal Smart & Lossless Ingestion (PDF, Word, Excel, Code) with Semantic Chunking and Instant Vectorization."
        status: "done"
        gate: "Lossless binary storage + Recursive Chunking + pgvector Indexing operational."
        tasks:
          - "Setup Supabase Storage (Bucket: artifacts) with RLS"
          - "Implement Two-Phase Ingest (Upload & Digest)"
          - "Implement SHA-256 Deduplication & Gzip Compression"
          - "Implement Recursive Semantic Chunking"
          - "Implement Instant Vectorization (pgvector)"
          - "Implement SourceNodeView & Fragment Navigation"
        evidence_nodes:
          - "src/lib/ingest/index.ts"
          - "src/lib/ingest/chunking.ts"
          - "src/lib/ingest/vectorizer.ts"
          - "src/components/editor/SourceNodeView.tsx"
          - "documentacion/HITO_2.7_SUMMARY.md"

      - id: "2.8"
        title: "The Window Manager (UX Futurista)"
        description: "Minority Report-style floating windows with glassmorphism for multitasking over the graph."
        status: "done"
        gate: "FloatingPanel component functional and integrated."
        tasks:
          - "Implement FloatingPanel.tsx"
          - "Integrate Window Manager in useGraphStore"
          - "Mount Floating Window in page.tsx"
        evidence_nodes:
          - "src/components/ui/FloatingPanel.tsx"
          - "documentacion/DESIGN_SYSTEM_2.0.md"

      - id: "2.9"
        title: "BYOK Secrets Management"
        description: "Vault integration for user keys."
        status: "done"
        gate: "Encryption at rest for all third-party keys."
        tasks:
          - "Implement KeyVault (AES-GCM Web Crypto)"
          - "Implement Secure Storage Logic (LocalStorage)"
          - "Implement RateLimiter infrastructure"
        evidence_nodes:
          - "src/lib/security/vault.ts"
          - "src/kernel/security/rate-limiter.ts"
          - "documentacion/HITO_PHASE_2_ENHANCEMENTS.md"

  - id: 3
    title: "Phase 3: Scaling & Verification (Operational Excellence)"
    description: "Hardening the system for high-volume data."
    phase_gate: "RLM Compiler identifies contradictions with the Canon automatically."
    hitos:
      - id: "3.1"
        title: "Hierarchical Digests (Fractal Map-Reduce)"
        description: "Recursive branch/project summarization with conflict detection."
        status: "done"
        gate: "Automatic summary and crystallized intelligence in node_digests table."
        tasks: 
          - "Implement node_digests table (Postgres)"
          - "Implement Recursive BFS/DFS Branch Discovery"
          - "Implement Fractal Map-Reduce Engine (DigestEngine.ts)"
          - "Implement Architect-level LLM prompt with Conflict Detection"
          - "Implement UI context menu trigger (Deep Digest)"
        evidence_nodes: 
          - "src/kernel/digest_engine.ts"
          - "supabase/migrations/gate16_hierarchical_digests.sql"
          - "src/components/ui/NodeContextMenu.tsx"
          - "docs/DIGEST_ENGINE.md"

      - id: "3.2"
        title: "Staleness Detection"
        description: "Evidence expiration and invalidation warnings."
        status: "done"
        gate: "Evidence age tracking active."
        tasks: 
          - "Implement is_stale flag in table"
          - "Implement markStale logic in Kernel"
          - "Implement Observability Tracing"
        evidence_nodes: 
          - "src/kernel/digest_engine.ts"
          - "src/kernel/observability.ts"
          - "documentacion/HITO_3.2_STALENESS_DETECTION.md"

      - id: "3.3"
        title: "Dynamic Pricing Oracle"
        description: "Real-time pricing for LLM calls via OpenRouter API."
        status: "done"
        gate: "measureCost updates dynamically based on market rates."
        tasks:
          - "Implement PriceRegistry (Singleton)"
          - "Integrate OpenRouter models API"
          - "Implement 24h caching and fallback safety"
        evidence_nodes:
          - "src/kernel/observability.ts"
          - "documentacion/HITO_3.3_DYNAMIC_PRICING.md"

      - id: "3.4"
        title: "Link-OS (Extension V3)"
        description: "Side Panel and Offscreen Parser architecture for deep link analysis."
        status: "done"
        gate: "Extension can parse links into Side Panel and insert into Chat."
        tasks:
          - "Implement Offscreen Document (Readability.js)"
          - "Implement Side Panel UI (React)"
          - "Implement Selection Capture (Wedge)"
          - "Implement Source Metadata extraction (URL, Title, Timestamp)"
          - "Implement Content Script ðŸ§  Trigger"
          - "Implement Insert-to-Chat automation"
        evidence_nodes:
          - "extension/src/background/index.ts"
          - "extension/src/sidepanel/SidePanelViewer.tsx"
          - "documentacion/HITO_3.4_LINK_OS_EXTENSION.md"
          - "documentacion/HITO_PHASE_2_ENHANCEMENTS.md"

      - id: "3.5"
        title: "Identity & Security (Gate 8)"
        description: "Supabase Auth and RLS enforcement for multi-tenant graph nodes."
        status: "done"
        gate: "Secure access to private projects via JWT/RLS."
        tasks: 
          - "Setup Supabase Auth (Sign-in/Sign-up)"
          - "Implement project_id column and RLS policies"
          - "Implement user_id ownership tracking"
        evidence_nodes: 
          - "supabase/migrations/gate8_auth_rls.sql"
          - "documentacion/HITO_3.5_GATE8_IDENTITY.md"

      - id: "3.6"
        title: "Collaborative Governance (Gate 9)"
        description: "AI-Mediated Consensus and Change Request workflows."
        status: "done"
        gate: "Change requests can be visualized with Visual Diff and approved."
        tasks:
          - "Implement project_members and change_requests tables"
          - "Implement RLM Mediator for consensus"
          - "Build Visual Diff Engine (UI)"
          - "Add Native View Transitions API support"
        evidence_nodes:
          - "supabase/migrations/gate9_collaboration.sql"
          - "src/components/collaboration/VisualDiffView.tsx"
          - "documentacion/HITO_3.6_GATE9_COLLABORATION.md"

      - id: "3.7"
        title: "The Brain Transplant (RLM Extension)"
        description: "Real LLM connection, Smart Routing, and Recursive Context Optimization."
        status: "done"
        gate: "System generates infinite-length documents with enforced observability."
        tasks:
          - "Implement Dual-Engine Settings (Reasoning/Efficiency)"
          - "Implement Smart Routing Gateway (traceSpan + measureCost)"
          - "Implement Recursive Language Modeling (RLM Loop)"
          - "Implement Recursive Planner Subdivision"
          - "Implement Selective Retriever (Digests vs Raw)"
          - "Implement TOON Topology-based context filtering"
          - "Add Quality/Fidelity Mode toggle (preventing drift)"
        evidence_nodes:
          - "src/kernel/llm/gateway.ts"
          - "src/compiler/planner.ts"
          - "src/compiler/retriever.ts"
          - "src/compiler/assembler.ts"
          - "documentacion/HITO_3.7_GATE9_EXTENSION_BRAIN.md"
          - "documentacion/HITO_PHASE_2_ENHANCEMENTS.md"

  - id: 4
    title: "Phase 4: Enterprise Hardening"
    description: "Readying the platform for professional organizations."
    phase_gate: "SOC2 Type II compliance readiness."
    hitos:
      - id: "4.1"
        title: "SSO/SAML & RBAC"
        description: "Enterprise identity and role-based access control."
        status: "done"
        gate: "RBAC policies enforced per sub-graph."
        tasks:
          - "Implement Soberano/Arquitecto/Observador role hierarchy"
          - "Create ProjectManifest.tsx for governance definition"
          - "Integrate guards.ts with canPerformAction RBAC logic"
          - "Connect RLMDispatcher for automated scaffolding"
        evidence_nodes:
          - "src/kernel/guards.ts"
          - "src/components/collaboration/ProjectManifest.tsx"
          - "documentacion/HITO_4.1_SOVEREIGN_ONBOARDING.md"

      - id: "4.2"
        title: "Local Compiler (Universal BYOE)"
        description: "Privacy Mode supporting local LLM endpoints (Ollama, vLLM) via OpenAI standards."
        status: "done"
        gate: "Gateway validates and routes to custom endpoints successfully."
        tasks:
          - "Implement baseUrl support in SettingsStore"
          - "Implement callCustomOpenAI adapter in Gateway"
          - "Implement Endpoint Verification logic"
          - "Build Universal Endpoint Config UI"
        evidence_nodes:
          - "src/kernel/llm/gateway.ts"
          - "documentacion/HITO_4.2_LOCAL_COMPILER.md"

      - id: "4.3"
        title: "Forensic UX (Internal Audit)"
        description: "Circuit Breaker and X-Ray mode for radical transparency and logic enforcement."
        status: "done"
        gate: "Alt-key X-Ray and LogicCircuitBreakerError UI are functional."
        tasks:
          - "Implement LogicCircuitBreakerError (Kernel)"
          - "Update Verifier to trigger CRITICAL halts"
          - "Implement XRayOverlay & SmartViewer bridge"
          - "Implement Red-Screen Circuit Breaker UI"
        evidence_nodes:
          - "src/components/ui/CircuitBreaker.tsx"
          - "src/components/ui/XRayOverlay.tsx"
          - "documentacion/HITO_4.3_FORENSIC_UX.md"

      - id: "4.4"
        title: "Authority Signature (Pact with AI)"
        description: "Cryptographic human seals to protect ground truth and enforce AI obedience in RLM."
        status: "done"
        gate: "Assembler respects signed nodes and Verifier detects broken seals."
        tasks:
          - "Implement human_signature schema (IR)"
          - "Update Assembler RLM loop with sanctity enforcement"
          - "Implement Wax Seal UI in NodeEditor"
          - "Add BROKEN_SIGNATURE_SEAL check to Verifier"
        evidence_nodes:
          - "src/components/editor/NodeEditor.tsx"
          - "documentacion/HITO_4.4_AUTHORITY_SIGNATURE.md"

      - id: "4.5"
        title: "Audit & Public Observability"
        description: "Expose AI machinery (tokens, cost, latency) per section via Engineer HUD."
        status: "done"
        gate: "HUD shows real-time job metrics in X-Ray mode."
        tasks:
          - "Implement AuditStore (Kernel)"
          - "Integrate section metrics in Assembler loop"
          - "Implement Engineer HUD in XRayOverlay"
        evidence_nodes:
          - "src/kernel/observability.ts"
          - "documentacion/HITO_4.5_AUDIT_LOGS.md"

      - id: "4.6"
        title: "Mediator Agent & Pulse"
        description: "AI-driven structural heartbeat for logic gap detection and recursive abstraction proposals."
        status: "done"
        gate: "Mediator proposes automatic hierarchical digests and contradiction tensions."
        tasks:
          - "Implement MediatorAgent v3.0 (Kernel)"
          - "Implement Structural Pulse (analyzeStructure)"
          - "Implement Recursive Abstraction Proposal"
          - "Implement Visual Tension Detection (PIN contradictions)"
        evidence_nodes:
          - "src/kernel/collaboration/MediatorAgent.ts"
          - "documentacion/HITO_4.6_MEDIATOR_AND_FORENSICS.md"

      - id: "4.7"
        title: "Antigravity Engine (Rust/WASM)"
        description: "High-performance physics engine in Rust compiled to WebAssembly for native 60 FPS graph layout."
        status: "done"
        gate: "Graph forces computed in WASM without blocking the UI thread."
        tasks:
          - "Create antigravity-engine Rust project"
          - "Implement apply_forces in Rust"
          - "Create useAntigravityEngine bridge hook"
          - "Add type shims for TypeScript"
        evidence_nodes:
          - "antigravity-engine/src/lib.rs"
          - "src/hooks/useAntigravityEngine.ts"
          - "src/types/antigravity-engine.d.ts"

      - id: "4.8"
        title: "High-Ceiling Rust Ingestor"
        description: "Rust microservice for heavy file parsing (PDF, HTML) and semantic chunking, eliminating Node.js memory limits."
        status: "done"
        gate: "processHeavyFile in TypeScript delegates to the Rust worker."
        tasks:
          - "Create ingestor-rust project and Cargo.toml"
          - "Implement PDF and HTML parsing in Rust"
          - "Implement Semantic Chunking in Rust"
          - "Create Axum server for ingestion API"
          - "Integrate with TypeScript processHeavyFile"
        evidence_nodes:
          - "ingestor-rust/src/main.rs"
          - "ingestor-rust/src/parsers.rs"
          - "ingestor-rust/src/chunking.rs"
          - "src/lib/ingest/parsers.ts"

      - id: "4.9"
        title: "Smart Routing & Price Registry 2026"
        description: "Automatic model selection based on task complexity and a 2026-projected price registry for budget optimization."
        status: "done"
        gate: "SmartRouter selects optimal model and Gateway estimates cost before calls."
        tasks:
          - "Implement PRICE_REGISTRY_2026 in observability.ts"
          - "Create SmartRouter in gateway.ts"
          - "Integrate Smart Routing into MediatorAgent inference"
          - "Add cost estimation and circuit breaker logic"
        evidence_nodes:
          - "src/kernel/observability.ts"
          - "src/kernel/llm/gateway.ts"

      - id: "4.10"
        title: "Vault Security (E2E BYOK)"
        description: "AES-GCM encryption for BYOK API keys with JIT decryption and log sanitization."
        status: "done"
        gate: "API keys are stored encrypted and only decrypted in memory for the duration of a call."
        tasks:
          - "Create Vault encryption utility (AES-GCM)"
          - "Update useSettingsStore for encrypted persistence"
          - "Implement JIT decryption in LLM Gateway"
          - "Create Guards for log sanitization ([REDACTED])"
        evidence_nodes:
          - "src/lib/security/vault.ts"
          - "src/kernel/guards.ts"
          - "src/store/useSettingsStore.ts"

      - id: "4.11"
        title: "Forensic Audit View"
        description: "Real-time live audit console in extension SidePanel exposing latency, cost, and engine per operation."
        status: "done"
        gate: "User can see every traceSpan in the Forensic Audit tab."
        tasks:
          - "Refine otel-config.yaml with memory limiters"
          - "Create useAuditStream hook in extension"
          - "Implement SidePanelAuditView in extension"
          - "Connect traceSpan to live audit stream via GraphStore"
        evidence_nodes:
          - "otel-config.yaml"
          - "extension/src/hooks/useAuditStream.ts"
          - "extension/src/components/SidePanelAuditView.tsx"
          - "src/kernel/observability.ts"

      - id: "4.12"
        title: "Professional Deployment (Docker & Chef)"
        description: "Multi-stage Dockerfile with Cargo Chef for optimized Rust builds and Distroless for security."
        status: "done"
        gate: "docker compose up brings up the entire system (Next.js, Rust Ingestor, OTel Collector)."
        tasks:
          - "Create ingestor-rust/Dockerfile (Cargo Chef)"
          - "Create main docker-compose.yml"
          - "Create otel-config.yaml for observability"
        evidence_nodes:
          - "ingestor-rust/Dockerfile"
          - "docker-compose.yml"
          - "otel-config.yaml"

  - id: 5
    title: "Phase 5: Universal Capture System"
    description: "Frictionless knowledge capture from any source."
    phase_gate: "Files and text can be captured from LLMs, cloud services, and local system."
    hitos:
      - id: "5.1"
        title: "LLM File Capture"
        description: "Capture files uploaded to ChatGPT, Claude, and Gemini interfaces."
        status: "done"
        gate: "Extension detects and captures files from all major LLM platforms."
        tasks:
          - "Implement BaseFileDetector interface"
          - "Implement ChatGPTDetector"
          - "Implement ClaudeDetector"
          - "Implement GeminiDetector"
          - "Implement DragDropHandler for file dragging"
          - "Add CAPTURE_FILE handler in background script"
          - "Create /api/ingest/file endpoint"
        evidence_nodes:
          - "extension/src/content/file-detector.ts"
          - "extension/src/content/chatgpt-detector.ts"
          - "extension/src/content/claude-detector.ts"
          - "extension/src/content/gemini-detector.ts"
          - "extension/src/content/drag-drop-handler.ts"
          - "extension/src/background/index.ts"
          - "src/app/api/ingest/file/route.ts"
          - "documentacion/SISTEMA_CAPTURA_UNIVERSAL.md"

      - id: "5.2"
        title: "Text-to-Node Drag & Drop"
        description: "Direct text selection capture to floating windows with auto-node creation."
        status: "done"
        gate: "Text can be dragged from any web page to floating panels."
        tasks:
          - "Enhance FloatingPanel with drag & drop handlers"
          - "Implement visual feedback for drop zones"
          - "Add text/file type detection"
          - "Create /api/nodes/quick endpoint"
          - "Support source URL capture"
        evidence_nodes:
          - "src/components/ui/FloatingPanel.tsx"
          - "src/app/api/nodes/quick/route.ts"
          - "documentacion/SISTEMA_CAPTURA_UNIVERSAL.md"

      - id: "5.3"
        title: "Cloud Storage Integration"
        description: "Capture files from Notion, Google Drive, Dropbox interfaces."
        status: "done"
        gate: "Files from cloud platforms captured with same UX as LLM files."
        tasks:
          - "Implement CloudFileDetector interface"
          - "Implement GoogleDriveDetector"
          - "Implement NotionDetector"
          - "Implement DropboxDetector"
          - "Implement unified CloudStorageCapture system"
          - "Add CAPTURE_CLOUD_FILE handler in background script"
        evidence_nodes:
          - "extension/src/content/cloud-detectors/base.ts"
          - "extension/src/content/cloud-detectors/google-drive.ts"
          - "extension/src/content/cloud-detectors/notion.ts"
          - "extension/src/content/cloud-detectors/dropbox.ts"
          - "extension/src/content/cloud-detectors/index.ts"
          - "extension/src/background/index.ts"
          - "documentacion/HITO_5.3_CLOUD_STORAGE.md"

      - id: "5.4"
        title: "X-Ray Vision: Ambient Percept"
        description: "Real-time semantic analysis and visual highlighting of web content."
        status: "done"
        gate: "Ambient scanner identifies IR types (Claim/Evidence) with zero-click HUD metrics."
        tasks:
          - "Implement TextBlockDetector (Ambient Scanner)"
          - "Implement SemanticBuffer (Batch Queue)"
          - "Build XRayHighlighter (Visual Layer w/ Shadow DOM)"
          - "Implement XRayHUD (Real-time Engineering Metrics)"
          - "Integrate One-Click Capture to /api/nodes/quick"
        evidence_nodes:
          - "extension/src/content/text-block-detector.ts"
          - "extension/src/content/semantic-buffer.ts"
          - "extension/src/content/xray-highlighter.ts"
          - "extension/src/content/xray-hud.ts"
          - "extension/src/content/xray-system.ts"
          - "documentacion/XRAY_VISION_TECHNICAL.md"

  - id: 7
    title: "Phase 7: Sovereign Intelligence Layer"
    description: "Self-healing graph structures with hybrid SAT+RLM validation and total transparency."
    phase_gate: "Graph maintains 100% structural and semantic consistency with forensic auditability."
    hitos:
      - id: "7.8"
        title: "Self-Healing Engine & Alignment Protocol"
        description: "Hybrid SAT Solver + RLM Swarm for detecting and repairing inconsistencies."
        status: "done"
        gate: "Ghost Nodes projected for detected gaps and materialized with authority signatures."
        tasks:
          - "Implement alignment_engine.ts orchestrator"
          - "Create AlignmentOverlay.tsx for gap visualization"
          - "Add materializeGhost action to store"
          - "Integrate Ed25519 signing for materialized nodes"
        evidence_nodes:
          - "src/kernel/alignment_engine.ts"
          - "src/components/graph/AlignmentOverlay.tsx"
          - "src/components/graph/AlignmentTunnels.tsx"
          - "documentacion/HITO_7.8_SELF_HEALING_ENGINE.md"

      - id: "7.9"
        title: "Sync Coherence Agent (SyncGuardian)"
        description: "Real-time mutation validation with SAT and CRDT synchronization."
        status: "done"
        gate: "Mutations rejected if they violate PIN invariants."
        tasks:
          - "Create SyncGuardian.ts kernel module"
          - "Implement triggerRipple sensorial feedback"
          - "Hook guardian into updateNodeContent, onConnect, mutateNodeType"
          - "Add RLM Shadow Audit for semantic drift"
        evidence_nodes:
          - "src/kernel/SyncGuardian.ts"
          - "src/components/graph/SensoryRipple.tsx"
          - "documentacion/HITO_7.9_SYNC_COHERENCE_AGENT.md"

      - id: "7.10"
        title: "Forensic Audit Mode (X-Ray Vision)"
        description: "Total transparency layer showing AI reasoning, costs, and confidence per node."
        status: "done"
        gate: "X-Ray toggle exposes ForensicAuditView and XRayOverlay."
        tasks:
          - "Create useXRayMode hook"
          - "Implement ForensicAuditView.tsx session metrics panel"
          - "Implement XRayOverlay.tsx reasoning bubbles"
          - "Add Circuit Breaker button for budget control"
        evidence_nodes:
          - "src/hooks/useXRayMode.ts"
          - "src/components/graph/ForensicAuditView.tsx"
          - "src/components/graph/XRayOverlay.tsx"
          - "documentacion/HITO_7.10_XRAY_MODE.md"

      - id: "7.11"
        title: "Sovereign Onboarding (Project Initialization & RBAC)"
        description: "High-fidelity project manifest and role-based access control."
        status: "done"
        gate: "ProjectManifest triggers RLMDispatcher scaffolding with RBAC enforcement."
        tasks:
          - "Create ProjectManifest.tsx onboarding HUD"
          - "Implement BootSequence.tsx with Neural Ripple effects"
          - "Create RLMDispatcher.ts and RLMCompiler.ts"
          - "Refine guards.ts for Soberano/Arquitecto/Observador roles"
        evidence_nodes:
          - "src/components/collaboration/ProjectManifest.tsx"
          - "src/components/graph/BootSequence.tsx"
          - "src/kernel/RLMDispatcher.ts"
          - "src/kernel/RLMCompiler.ts"
          - "src/kernel/guards.ts"
          - "documentacion/HITO_4.1_SOVEREIGN_ONBOARDING.md"

operational_rules:
  sequential_execution: true # Mandatory: Hito N requires Hito N-1 as Done.
  gate_enforcement: "Strict - Phase Gates must be satisfied for milestone closure."
  documentation_level: "Structured node-by-node according to canon/04_definition_of_done.md."
  traceability: "Mandatory population of evidence_nodes list for each hito."

  - id: 6
    title: "Phase 6: Advanced Rust Core (Enterprise Grade)"
    description: "Native Rust modules for cryptographic authority, logic verification, real-time collaboration, and massive document generation."
    phase_gate: "All four Rust modules compile to WASM and pass integration tests."
    hitos:
      - id: "6.1"
        title: "Authority Signer (Ed25519)"
        description: "Cryptographic signatures for verifiable human authorship of nodes."
        status: "done"
        gate: "sign_node and verify_signature functions work with round-trip test vectors."
        tasks:
          - "Create signer-core Rust project"
          - "Implement Ed25519 signing with ed25519-dalek"
          - "Add TypeScript type declarations"
        evidence_nodes:
          - "signer-core/src/lib.rs"
          - "src/types/signer-core.d.ts"

      - id: "6.2"
        title: "Logic SAT Solver"
        description: "SAT-based constraint solver for PIN verification in massive graphs."
        status: "done"
        gate: "check_pin_consistency detects known contradictions."
        tasks:
          - "Create logic-engine Rust project"
          - "Implement SAT clauses for graph edges (supports, contradicts, blocks)"
          - "Force PIN nodes as invariants in SAT formula"
        evidence_nodes:
          - "logic-engine/src/lib.rs"
          - "src/types/logic-engine.d.ts"

      - id: "6.3"
        title: "CRDT Sync Engine"
        description: "Conflict-free Replicated Data Types for real-time collaboration."
        status: "done"
        gate: "Concurrent edits merge correctly without conflicts."
        tasks:
          - "Create crdt-sync Rust project"
          - "Implement Yrs-based document sync"
          - "Add merge_remote_update and compute_diff functions"
        evidence_nodes:
          - "crdt-sync/src/lib.rs"
          - "src/types/crdt-sync.d.ts"

      - id: "6.4"
        title: "Stream Assembler"
        description: "Streaming document generator for 500+ page exports without RAM limits."
        status: "done"
        gate: "Axum streaming endpoint generates documents incrementally."
        tasks:
          - "Create stream-assembler Rust project"
          - "Implement /assemble and /stream endpoints"
          - "Support Markdown and PDF (stub) output"
        evidence_nodes:
          - "stream-assembler/src/main.rs"

  - id: 12
    title: "Phase 12: Neural Synergy & Omniscience"
    description: "Absolute visibility and predictive state management."
    phase_gate: "X-Ray mode and Ghost Nodes are functional."
    hitos:
      - id: "12.1"
        title: "Neural Shadowing"
        description: "Ghost nodes for predictive drafting."
        status: "done"
        tasks: ["Implement ghostNodes state", "Add Predict action"]
        evidence_nodes: ["src/store/useGraphStore.ts"]
      - id: "12.2"
        title: "X-Ray Vision"
        description: "Structural skeleton visualization."
        status: "done"
        tasks: ["Implement X-Ray toggle", "Add Alt-key overlay"]
        evidence_nodes: ["src/components/graph/WorkNode.tsx"]

  - id: 13
    title: "Phase 13: Enterprise Hardening"
    description: "SOC2-compliant security and role-based access."
    phase_gate: "RBAC policies enforced in Kernel Guards."
    hitos:
      - id: "13.1"
        title: "RBAC Foundation"
        description: "Viewer/Editor/Admin role hierarchy."
        status: "done"
        tasks: ["Define UserRoleSchema", "Implement canPerformAction"]
        evidence_nodes: ["src/kernel/guards.ts"]

  - id: 14
    title: "Phase 14: Swarm Orchestrator"
    description: "Multi-agent coordination logic."
    phase_gate: "Swarm Pulse dispatches to multiple agents."
    hitos:
      - id: "14.1"
        title: "Agent Registry"
        description: "Managing specialized agent personas."
        status: "done"
        tasks: ["Create SwarmOrchestrator.ts", "Add Agent Badges to UI"]
        evidence_nodes: ["src/kernel/collaboration/SwarmOrchestrator.ts"]

  - id: 15
    title: "Phase 15: Swarm Autonomy"
    description: "Real neural synergy and parallel inference."
    phase_gate: "Swarm Dashboard HUD is operational."
    hitos:
      - id: "15.1"
        title: "Neural Deepening"
        description: "Agents connected to real LLM inference."
        status: "done"
        tasks: ["Integrate Mediator inference in Swarm", "Add SwarmDashboard UI"]
        evidence_nodes: ["src/components/ui/SwarmDashboard.tsx"]
  - id: 16
    title: "Phase 16: Neural Convergence"
    description: "The Singular Point: Autonomous Intelligence Environment."
    phase_gate: "Ambient Swarm and Neural Consensus are fully operational."
    hitos:
      - id: "16.1"
        title: "Ambient Awareness"
        description: "Zero-click autonomous reasoning."
        status: "done"
        tasks: ["Implement AmbientSwarmManager", "Integrate store-subscribe triggers"]
        evidence_nodes: ["src/kernel/collaboration/AmbientSwarmManager.ts"]
      - id: "16.2"
        title: "Neural Consensus"
        description: "Multi-agent voting on node validity."
        status: "done"
        tasks: ["Implement voteOnNode action", "Add consensus metadata to IR"]
        evidence_nodes: ["src/store/useGraphStore.ts"]
      - id: "16.3"
        title: "Convergence UI"
        description: "Visual 'consciousness pulse' in Graph Canvas."
        status: "done"
        tasks: ["Create ConsciousnessPulse component", "Add ambient background effects"]
        evidence_nodes: ["src/components/graph/GraphCanvas.tsx"]
  - id: 17
    title: "Phase 17: Neural Bridge"
    description: "Hybrid Semantic-Topological Retrieval Engine."
    phase_gate: "Hybrid retriever integrated into Swarm reasoning cycles."
    hitos:
      - id: "17.1"
        title: "Semantic Grounding"
        description: "Integration of pgvector in compiler retriever."
        status: "done"
        tasks: ["Upgrade retrieveContext.ts", "Connect secureSearch to Swarm"]
        evidence_nodes: ["src/compiler/retriever.ts"]
      - id: "17.2"
        title: "Global Context Scouting"
        description: "Agents perform project-wide conceptual searches."
        status: "done"
        tasks: ["Implement virtualPlan pattern in Orchestrator"]
        evidence_nodes: ["src/kernel/collaboration/SwarmOrchestrator.ts"]
  - id: 18
    title: "Phase 18: Swarm Agency (The Hand)"
    description: "Real-world actions and tool-use capabilities."
    phase_gate: "ToolRegistry is operational; agents can mutate the graph."
    hitos:
      - id: "18.1"
        title: "Tool Protocol"
        description: "Standardized function calling for agents."
        status: "done"
        tasks: ["Create ToolRegistry.ts", "Extend LLM Gateway with tools"]
        evidence_nodes: ["src/kernel/agency/ToolRegistry.ts"]
      - id: "18.2"
        title: "Autonomous Intervention"
        description: "Agents creating real nodes through reasoning."
        status: "done"
        tasks: ["Update SwarmOrchestrator execution loop"]
        evidence_nodes: ["src/kernel/collaboration/SwarmOrchestrator.ts"]

  - id: 19
    title: "Phase 19: Multimodal Perception (The Eye)"
    description: "Visual reasoning and diagram awareness."
    phase_gate: "Vision Analyst agent consumes and reasons about images."
    hitos:
      - id: "19.1"
        title: "Visual Gateway"
        description: "Multimodal input support in LLM adapters."
        status: "done"
        tasks: ["Extend callOpenAI and callGemini for images"]
        evidence_nodes: ["src/kernel/llm/gateway.ts"]
      - id: "19.2"
        title: "Vision Swarm"
        description: "Specialized agents for visual analysis."
        status: "done"
        tasks: ["Create Vision Analyst agent", "Image extraction in Orchestrator"]
        evidence_nodes: ["src/kernel/collaboration/SwarmOrchestrator.ts"]

  - id: 20
    title: "Phase 20: Collective Intelligence (The Network)"
    description: "Inter-Swarm Protocol for decentralized collaboration."
    phase_gate: "Foundation for swarm-to-swarm node sharing is active."
    hitos:
      - id: "20.1"
        title: "Inter-Swarm Protocol"
        description: "Decentralized node sharing foundation."
        status: "done"
        tasks: ["Implement InterSwarmProtocol.ts"]
        evidence_nodes: ["src/kernel/collaboration/InterSwarmProtocol.ts"]

  - id: 21
    title: "Phase 21: Zero-Friction Sensoriality"
    description: "Futuristic UX with spatial magnetism and neural feedback."
    phase_gate: "User experience feels biological and zero-friction."
    hitos:
      - id: "21.1"
        title: "Spatial Magnetism"
        description: "Nodes respond to cursor proximity via physics."
        status: "done"
        tasks: ["Update useAntigravityEngine.ts with cursor gravity"]
        evidence_nodes: ["src/hooks/useAntigravityEngine.ts"]
      - id: "21.2"
        title: "Telepathic HUD"
        description: "Cmd+K zero-friction command interface."
        status: "done"
        tasks: ["Create CommandHUD.tsx"]
        evidence_nodes: ["src/components/ui/CommandHUD.tsx"]
  - id: 22
    title: "Phase 22: Absolute Reality & Performance"
    description: "Zero-copy physics and unified inference routing."
    phase_gate: "Physics engine runs at 60fps with zero-copy; Inference tiers are standardized."
    hitos:
      - id: "22.1"
        title: "Zero-Copy Physics Engine"
        description: "Float32Array and Transferable Objects for high-speed node layouts."
        status: "done"
        tasks: ["Optimize physics.worker.ts with Float32Array", "Implement Transferable Objects sharing"]
        evidence_nodes: ["src/workers/physics.worker.ts"]
      - id: "22.2"
        title: "Unified Inference Tiers"
        description: "Standardized REFLEX, REASONING, and CREATIVE routing."
        status: "done"
        tasks: ["Implement TaskTier enum", "Refactor SmartRouter for tiered logic"]
        evidence_nodes: ["src/kernel/llm/gateway.ts", "docs/TOKEN_ECONOMY.md"]
      - id: "22.3"
        title: "Forensic Observability (v2)"
        description: "Detailed per-node token and cost ledger."
        status: "done"
        tasks: ["Implement token_ledger RLS protection", "Add Audit view to NodeEditor"]
        evidence_nodes: ["supabase/migrations/gate12_token_economy.sql"]
  - id: 23
    title: "Phase 23: Sovereignty & Atomic Efficiency (V1.7.0)"
    description: "Deployment of Cognitive Integrity Middleware and Atomic Efficiency (Zero-Allocation & Semantic Pruning)."
    phase_gate: "Semantic Pruning and Zero-Allocation Collider achieve peak price-performance ratio."
    status: "done"
  - id: 24
    title: "Phase 24: Cognitive Circular Economy (V1.8.0)"
    description: "Transformation of rejected tokens into immunological antibodies via recycling pipeline."
    phase_gate: "System autonomously immunizes against past failures without retraining."
    status: "done"
  - id: 25
    title: "Phase 25: Absolute Truth Hypervisor (V1.9.0)"
    description: "Real-time logit manipulation via Rust-Python FFI fusion."
    phase_gate: "Model is mathematically incapable of validating known falsehoods."
    status: "done"
  - id: 26
    title: "Phase 26: Zero-Mock Production Hardening (V2.0.0)"
    description: "Elimination of all hardcoded logic and unification of the embedding architecture."
    phase_gate: "System is 100% driven by dynamic context and local SLM sovereignty."
    hitos:
      - id: "26.1"
        title: "Dynamic Axiom Pool"
        description: "Removal of hardcoded rules in favor of live PIN node synchronization."
        status: "done"
      - id: "26.2"
        title: "Unified Vector Standard"
        description: "Universal migration to 768-dim (nomic-embed) across TS, Rust, and Python."
        status: "done"
      - id: "26.3"
        title: "Production Retriever"
        description: "Elimination of mock fallbacks and transition to pure Hybrid Graph-RAG."
        status: "done"
        evidence_nodes: ["src/compiler/retriever.ts", "rlm-core/src/rlm_core/main.py", "supabase_schema_vectors.sql"]
      - id: "23.4"
        title: "Dialectic Stress Testing"
        description: "Simulated sycophancy injection to verify self-healing robustness."
        status: "todo"
      - id: "23.4"
        title: "Dialectic Stress Testing"
        description: "Simulated sycophancy injection to verify self-healing robustness."
        status: "todo"
        tasks:
          - "Implement Automated Audit Simulation"
          - "Verify Contradiction Loop Integrity"
        evidence_nodes: []
      - id: "23.5"
        title: "Jury Self-Calibration"
        description: "Adjusting persona weights and prompts based on user 'rebuttals'."
        status: "todo"
        tasks:
          - "Implement Audit Feedback Loop"
          - "Automate Persona Prompt Refinement"
  - id: 24
    title: "Phase 24: Collective Wisdom & Consensus"
    description: "Multi-instance node validation and decentralized audit protocols."
    phase_gate: "Inter-swarm consensus reaches >90% agreement on audited claims."
    hitos:
      - id: "24.1"
        title: "Cross-Swarm Auditing"
        description: "Allowing external RLM cores to audit local graph claims."
        status: "todo"
      - id: "24.2"
        title: "Reputation Layer"
        description: "Score-based authority for nodes and auditors."
        status: "todo"
